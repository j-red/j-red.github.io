<!DOCTYPE html>
<head>
    <title>virtual tabletop</title>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <link rel="stylesheet" href="style/main.css">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">
        var entities = []; // global declaration of ALL entities
        var focused_entities = []; // global declaration of focused entities
        var rightsidebar_active = null; // active button on right sidebar
    </script>

    <script src="scripts/util.js"></script>
    <script src="scripts/entities.js"></script>
    <script src="scripts/sidebar.js"></script>
    <script type="module" src="https://unpkg.com/vanilla-colorful?module"></script>
    <!-- color picker from https://github.com/web-padawan/vanilla-colorful -->
</head>
<body oncontextmenu="return false;">
    <div id="overlays">
        <div class="overlay-menu" id="faq" onclick="toggle_faq();">
            <div class="overlay-box" onclick="event.stopPropagation();">
                <h2>faq</h2>
                <br />
                <p>select a tool from the RIGHT SIDEBAR to edit the map</p>
                <p>█: wall </p>
                <p>o: player (you can focus these ones!)</p>
                <p>@: wanderer</p>
                <p>~: erase</p>
                <p>-/+: change draw size</p>
                <p>click on an entity to FOCUS it</p>
                <p>hold SHIFT when focusing to focus additional entities</p>
                <p>move focused entities with W/A/S/D or &uarr;/&larr;/&darr;/&rarr;</p>
                <p>press ESCAPE to clear the map</p>
                <p>import/export maps in the IO menu</p>

                <p class="exit-menu-text">click anywhere else or press ESCAPE to exit</p>
            </div>
        </div>
    
        <div class="overlay-menu" id="io-menu" onclick="toggle_io();">
            <div class="overlay-box" id="io-display" onclick="event.stopPropagation();">
                <h2>import/export menu</h2>
                <h4>(work in progress -- IO not yet implemented</h4>
                <br />
                <div>
                    <button id="import-text" class="io-btn" onclick="import_state()">
                        import state
                    </button>
    
                    <button id="export-state" class="io-btn" onclick="export_state_to_IO()">
                        export state
                    </button> 
    
                    <button id="export-text" class="io-btn" onclick="export_ascii()">
                        export ASCII
                    </button>
                </div>
                
                <div id="io-box">
                    <!-- <input type="text" placeholder="copy/paste IO string here" id="iostring"> </input> -->
                        <textarea name="iotext" id="iotext" cols="50" rows="6" data-gramm="false"
                        data-gramm_editor="false"
                        data-enable-grammarly="false"
                        autocomplete="off" 
                        autocorrect="off" 
                        autocapitalize="off" 
                        spellcheck="false"
                    ></textarea>
                </div>
    
                <p class="exit-menu-text">click anywhere else or press ESCAPE to exit</p>
            </div>
        </div>

        <div class="overlay-menu" id="settings-menu" onclick="toggle_settings();">
            <div class="overlay-box" onclick="event.stopPropagation();">
                <h2>settings</h2>
                <h4>(work in progress -- many features not yet implemented)</h4>
                <br />
                <div style="display: inline-grid; column-gap: 200px;">
                    <h5>TODO: zoom level</h5>
                    <span class="option-line" id="option1">
                        <span id="option-1-slider">-------------------|</span>
                        <span id="option-1-value">100%</span>
                        <span id="option-1-delta">
                            <a id="decrease_option1" onclick="option1(-1)">-</a>/<a id="increase_option1" onclick="option1(1)">+</a>
                        </span>
                    </span>

                    <h5>TODO: volume</h5>
                    <span class="option-line" id="option2">
                        <span id="option-2-slider">-------------------|</span>
                        <span id="option-2-value">100%</span>
                        <span id="option-2-delta">
                            <a id="decrease_option2" onclick="option2(-1)">-</a>/<a id="increase_option2" onclick="option2(1)">+</a>
                        </span>
                    </span>

                    <h5>TODO: find a third option, lol</h5>
                    <span class="option-line" id="option3">
                        <span id="option-3-slider">-------------------|</span>
                        <span id="option-3-value">100%</span>
                        <span id="option-3-delta">
                            <a id="decrease_option3" onclick="option3(-1)">-</a>/<a id="increase_option3" onclick="option3(1)">+</a>
                        </span>
                    </span>

                </div>

                <div id="color-pickers" style="margin-top: 10px;">
                    <div class="color-picker-container">
                        <h5>background color</h5>
                        <hex-color-picker id="bg-selector" color="#050505"></hex-color-picker>
                    </div>

                    <div class="color-picker-container">
                        <h5>foreground color</h5>
                        <hex-color-picker id="fg-selector" color="#008000"></hex-color-picker>
                    </div>

                    <div class="color-picker-container">
                        <h5>focus color</h5>
                        <hex-color-picker id="focus-selector" color="#00ff00"></hex-color-picker>
                    </div>

                    <script type="text/javascript">
                        colorpicker_setup();
                    </script>

                    <button id="reset-colors" class="color-reset-btn" onclick="reset_colors()" style="margin-top: 10px;">
                        reset colors
                    </button>
                </div>

                

                <p class="exit-menu-text">click anywhere else or press ESCAPE to exit</p>
            </div>
        </div>
    </div>

    <div id="map">
        <div id="drag-overlay"></div>

        <!-- <div class="sidebar right top">
            <button id="rsb_walls" class="rightside button focused" tabindex="-1" onclick="right_sidebar('rsb_walls')">
                █
            </button>
    
            <button id="rsb_player" class="rightside button" tabindex="-1" onclick="right_sidebar('rsb_player')">
                o
            </button>
    
            <button id="rsb_entity" class="rightside button" tabindex="-1" onclick="right_sidebar('rsb_entity')">
                @
            </button>
    
            <button id="rsb_erase" class="rightside button" tabindex="-1" onclick="right_sidebar('rsb_erase')">
                ~
            </button>
    
            <p><a id="decrease_drawsize" onclick="drawsize(-1)" style="text-decoration:none;">-</a>/<a id="increase_drawsize" onclick="drawsize(1)">+</a></p>
        </div>
    
        <div class="sidebar right bottom">
            <button id="rsb_faq" class="rightside button bottom" tabindex="-1" onclick="toggle_faq()">
                ?
            </button>
    
            <button id="rsb_export" class="rightside button bottom" tabindex="-1" onclick="toggle_io()">
                IO
            </button>
        </div> -->

        <!-- Container for edges around screen -->
    </div>

    <!-- <div class="sidebar right">
        <div class="top">
            <button id="rsb_walls" class="rightside button focused" tabindex="-1" onclick="right_sidebar('rsb_walls')">
                █
            </button>
    
            <button id="rsb_player" class="rightside button" tabindex="-1" onclick="right_sidebar('rsb_player')">
                o
            </button>
    
            <button id="rsb_entity" class="rightside button" tabindex="-1" onclick="right_sidebar('rsb_entity')">
                @
            </button>
    
            <button id="rsb_erase" class="rightside button" tabindex="-1" onclick="right_sidebar('rsb_erase')">
                ~
            </button>
    
            <p><a id="decrease_drawsize" onclick="drawsize(-1)" style="text-decoration:none;">-</a>/<a id="increase_drawsize" onclick="drawsize(1)">+</a></p>
    
        </div>
    
        <div class="bottom">
            <button id="rsb_faq" class="rightside button bottom" tabindex="-1" onclick="toggle_faq()">
                ?
            </button>
    
            <button id="rsb_export" class="rightside button bottom" tabindex="-1" onclick="toggle_io()">
                IO
            </button>
        </div>
    </div> -->

    <div class="sidebar right top">
        <button id="rsb_walls" class="rightside button" tabindex="-1" onclick="right_sidebar('rsb_walls')">
            █
        </button>

        <button id="rsb_player" class="rightside button" tabindex="-1" onclick="right_sidebar('rsb_player')">
            o
        </button>

        <button id="rsb_entity" class="rightside button" tabindex="-1" onclick="right_sidebar('rsb_entity')">
            @
        </button>

        <button id="rsb_erase" class="rightside button" tabindex="-1" onclick="right_sidebar('rsb_erase')">
            ~
        </button>

        <p><a id="decrease_drawsize" onclick="drawsize(-1)" style="text-decoration:none;">-</a>/<a id="increase_drawsize" onclick="drawsize(1)">+</a></p>
    </div>

    <div class="sidebar right bottom">
        <button id="rsb_faq" class="rightside button bottom" tabindex="-1" onclick="toggle_faq()">
            ?
        </button>

        <button id="rsb_export" class="rightside button bottom" tabindex="-1" onclick="toggle_io()">
            IO
        </button>

        
        <button id="rsb_settings" class="rightside button bottom" tabindex="-1" onclick="toggle_settings()">
            ☰
        </button>
    </div>

    <!-- <script src="scripts/entities.js"></script> -->
    <script src="scripts/fill.js"></script>
    <script src="scripts/input.js"></script>
    
    <footer>
        <div class="copyright" style="position: absolute; right: 0px; padding-right: 80px;">
            <a href="https://j-red.github.io/" target="_blank">© j-red 2022</a>
        </div>
    </footer>
</body>
<footer>

</footer>