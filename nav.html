<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <link rel="stylesheet" href="css/all.css" type="text/css">
        <link rel="stylesheet" href="css/nav.css" type="text/css">
        <meta charset="utf-8">
        <!-- <title>illustration</title> -->
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="shortcut icon" type="image/png" href="assets/shell.png"/>
    </head>
    <body>
        <div class="sidenav" id="mySidebar">
            <script>
                // Size of browser viewport.
                var wHeight = $(window).height();
                var wWidth = $(window).width();
                console.log(wWidth + "x" + wHeight)

                // Size of HTML document (same as pageHeight/pageWidth in screenshot).
                // $(document).height();
                // $(document).width();

                var sidebarOpen = true;
                var openWidth = "200px";
                var collapsedWidth = "40px";

                function setCookie(cookieName, cookieValue, daysToExpire) {
                    var date = new Date();
                    date.setTime(date.getTime()+(daysToExpire*24*60*60*1000));
                    document.cookie = cookieName + "=" + cookieValue + "; expires=" + date.toGMTString();
                }

        		function getCookie(cookieName) {
                    var name = cookieName + "=";
                    var allCookieArray = document.cookie.split(';');
                    for(var i=0; i<allCookieArray.length; i++) {
                        var temp = allCookieArray[i].trim();
                        if (temp.indexOf(name)==0)
                        return temp.substring(name.length,temp.length);
                    }
                	return "";
                }

        		// function checkCookie() {
                //     var user = getCookie("testCookie");
                //     if (user != "")
                //     alert("Welcome back " + user + "!");
                //     else {
                //         user = prompt("Please enter your name");
                //         num = prompt("How many days you want to store your name on your computer?");
                //         if (user!="" && user!=null) {
                //             setCookie("testCookie", user, num);
                //         }
                //     }
                // }

                // function setCookie(cname, cvalue, exdays) {
                //     var d = new Date();
                //     d.setTime(d.getTime() + (exdays*24*60*60*1000));
                //     var expires = "expires="+ d.toUTCString();
                //     document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
                // }

                // function getCookie(cname) {
                //     var name = cname + "=";
                //     var decodedCookie = decodeURIComponent(document.cookie);
                //     var ca = decodedCookie.split(';');
                //     for(var i = 0; i < ca.length; i++) {
                //         var c = ca[i];
                //         while (c.charAt(0) == ' ') {
                //           c = c.substring(1);
                //     }
                //     if (c.indexOf(name) == 0) {
                //         return c.substring(name.length, c.length);
                //         }
                //     }
                //     return "";
                // }

                function toggle() {
                    // console.log("value of sidebarOpen: " + sidebarOpen)
                    if(sidebarOpen == true) {
                        closeNav();
                        // console.log("close");
                    } else {
                        openNav();
                        // console.log("open");
                    }
                }

                function openNav() {
                    sidebarOpen = true;
                    setCookie('navOpen', 'true', 1);
                    console.log('navOpen set to true')
                    console.log('actual value: "' + getCookie('navOpen') + '"')

                    document.getElementById("mySidebar").style.width = "240px";
                    // document.getElementById("main").style.marginLeft = "240px";
                    // document.getElementById("main").style.marginRight = "240px";

                    document.getElementById("homeBtn").style.width = openWidth;
                    document.querySelector('#homeBtn').textContent = 'Home';

                    document.getElementById("aboutBtn").style.width = openWidth;
                    document.querySelector('#aboutBtn').textContent = 'About';

                    document.getElementById("projectsBtn").style.width = openWidth;
                    document.querySelector('#projectsBtn').textContent = 'Projects';

                    document.getElementById("illustrationsBtn").style.width = openWidth;
                    document.querySelector('#illustrationsBtn').textContent = 'Illustrations';

                    document.getElementById("musicBtn").style.width = openWidth;
                    document.querySelector('#musicBtn').textContent = 'Music';

                    document.getElementById("designBtn").style.width = openWidth;
                    document.querySelector('#designBtn').textContent = 'Design';

                    document.getElementById("visualBtn").style.width = openWidth;
                    document.querySelector('#visualBtn').textContent = 'Visualize';
                }

                function closeNav() {
                    sidebarOpen = false;
                    setCookie('navOpen', 'false', 1);
                    console.log('navOpen set to false')

                    document.getElementById("mySidebar").style.width = "64px";
                    // document.getElementById("main").style.marginLeft= "auto";
                    // document.getElementById("main").style.marginRight = "auto";

                    document.getElementById("homeBtn").style.width = collapsedWidth;
                    document.querySelector('#homeBtn').textContent = 'H';

                    document.getElementById("aboutBtn").style.width = collapsedWidth;
                    document.querySelector('#aboutBtn').textContent = 'A';

                    document.getElementById("projectsBtn").style.width = collapsedWidth;
                    document.querySelector('#projectsBtn').textContent = 'P';

                    document.getElementById("illustrationsBtn").style.width = collapsedWidth;
                    document.querySelector('#illustrationsBtn').textContent = 'I';

                    document.getElementById("musicBtn").style.width = collapsedWidth;
                    document.querySelector('#musicBtn').textContent = 'M';

                    document.getElementById("designBtn").style.width = collapsedWidth;
                    document.querySelector('#designBtn').textContent = 'D';

                    document.getElementById("visualBtn").style.width = collapsedWidth;
                    document.querySelector('#visualBtn').textContent = 'V';
                }

                // if(wWidth <= 828) { //iPhone XR resolution width
                if(wWidth <= 1000) { //iPhone XR resolution width + headroom
                    closeNav();
                }

                var navOpen = getCookie('navOpen');
                console.log("value of navOpen: " + navOpen);

                if(navOpen == '') {
                    console.log("Cookie not set? setting to: " + sidebarOpen);
                    setCookie('navOpen', sidebarOpen.toString())
                }

                if(getCookie('navOpen') == 'false') {
                    closeNav();
                    console.log("cookie set to close, closing.");
                }

                if(getCookie('navOpen') == 'true') {
                    openNav();
                    console.log("cookie set to open, opening.");
                }


            </script>

            <!-- <button class="openbtn" style='background: black; margin-top: 10px;' onclick="openNav()">â˜° Open Sidebar</button> -->

            <button class="toggleBtn" id="toggleBtn" onclick="toggle()">Toggle Sidebar</button>
            <table id="navButtons">
                <button class="btn" id="homeBtn" onclick="window.location.href = 'index.html';">Home</button>
                <button class="btn" id="aboutBtn" onclick="window.location.href = 'about.html';">About</button>
                <button class="btn" id="projectsBtn" onclick="window.location.href = 'projects.html';">Projects</button>
                <button class="btn" id="illustrationsBtn" onclick="window.location.href = 'portfolio.html';">Illustrations</button>
                <button class="btn" id="musicBtn" onclick="window.location.href = 'music.html';">Music</button>
                <button class="btn" id="designBtn" onclick="window.location.href = 'design.html';">Design</button>

                <button class="btn" id="visualBtn" onclick="window.location.href = 'visual.html';">Visualize</button>
            </table>

            <!-- TODO: left align social links in expanded view -->
            <!-- TODO: add github link? -->

            <div class="links">
                <table id="social">
                    <a href="https://twitter.com/home" class="links">
                        <img src="assets/twitter_logo.png" alt="Twitter" class="icons">
                    </a>
                    <!-- <br> -->
                    <a href="https://www.instagram.com/" class="links">
                        <img src="assets/instagram_logo.png" alt="Instagram" class="icons">
                    </a>
                    <!-- <br> -->
                    <a href="https://soundcloud.com/" class="links">
                        <img src="assets/soundcloud_logo.png" alt="SoundCloud" class="icons">
                    </a>
                    <!-- <br> -->
                    <a href="https://www.spotify.com/" class="links">
                        <img src="assets/spotify_logo.png" alt="Spotify" class="icons">
                    </a>
                    <!-- <br> -->
                </table>
            </div>
        </div>
    </body>
</html>
